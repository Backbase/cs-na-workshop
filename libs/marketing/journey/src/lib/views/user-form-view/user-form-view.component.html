<form class="card" [formGroup]="formGroup">
  <div class="card-header d-flex justify-content-between">
    <h1>User form</h1>
    <button (click)="syncProfile()" bbButton color="link">
      <bb-icon-ui name="autorenew"></bb-icon-ui>
      Sync Profile Data
    </button>
  </div>
  <div class="card-body">
    <div class="row">
      <bb-input-wrapper class="col-12 col-md-4">
        <bb-input-text-ui
          label="First Name"
          formControlName="firstName"
          placeholder="Name"
          autoComplete="given-name"
          bbInputWrapper
        ></bb-input-text-ui>
      </bb-input-wrapper>

      <bb-input-wrapper class="col-12 col-md-4">
        <bb-input-text-ui
          label="Middle Name"
          formControlName="middleName"
          placeholder="Name"
          autoComplete="additional-name"
          bbInputWrapper
        ></bb-input-text-ui>
      </bb-input-wrapper>
      <bb-input-wrapper class="col-12 col-md-4">
        <bb-input-text-ui
          label="Last Name"
          formControlName="lastName"
          placeholder="Name"
          autoComplete="family-name"
          bbInputWrapper
        ></bb-input-text-ui>
      </bb-input-wrapper>
    </div>
    <div class="row">
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-input-email-ui
          label="E-mail address"
          formControlName="email"
          placeholder="Please enter a value..."
          bbInputWrapper
        >
        </bb-input-email-ui>
      </bb-input-wrapper>
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-input-phone-ui
          label="Phone"
          formControlName="phoneNumber"
          placeholder="Phone number without country code"
          autoComplete="tel-national"
          bbInputWrapper
        ></bb-input-phone-ui>
      </bb-input-wrapper>
    </div>
    <div class="row">
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-input-text-ui
          label="Last 4 of Social Security Number"
          formControlName="ssn"
          placeholder="XXXX"
          bbInputWrapper
        ></bb-input-text-ui>
      </bb-input-wrapper>
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-amount-input-ui label="Income" formControlName="income" currency="USD" placeholder="0.00" bbInputWrapper>
        </bb-amount-input-ui>
      </bb-input-wrapper>
    </div>
    <div class="row">
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-dropdown-single-select-ui
          label="Marital Status"
          placeholder="Select Marital Status"
          formControlName="maritalStatus"
          [options]="martialStatus"
          class="d-block"
          bbInputWrapper
        >
        </bb-dropdown-single-select-ui>
      </bb-input-wrapper>
      <bb-input-wrapper class="col-12 col-md-6">
        <bb-dropdown-single-select-ui
          label="Employment Status"
          placeholder="Select Employment Status"
          formControlName="employmentStatus"
          [options]="employmentStatus"
          class="d-block"
          bbInputWrapper
        >
        </bb-dropdown-single-select-ui>
      </bb-input-wrapper>
    </div>
    <fieldset formGroupName="address">
      <legend>Address</legend>
      <div class="row">
        <bb-input-wrapper class="col-12 col-md-6">
          <bb-input-text-ui
            label="Address line 1"
            formControlName="line1"
            placeholder="123 Street"
            autoComplete="address-line1"
            bbInputWrapper
          ></bb-input-text-ui>
        </bb-input-wrapper>
        <bb-input-wrapper class="col-12 col-md-6">
          <bb-input-text-ui
            label="Address line 2"
            formControlName="line2"
            placeholder="Apt 23"
            autoComplete="address-line2"
            bbInputWrapper
          ></bb-input-text-ui>
        </bb-input-wrapper>
      </div>
      <div class="row">
        <bb-input-wrapper class="col-12 col-md-4">
          <bb-input-text-ui
            label="City"
            formControlName="city"
            placeholder="Atlanta"
            autoComplete="address-level2"
            bbInputWrapper
          ></bb-input-text-ui>
        </bb-input-wrapper>
        <bb-input-wrapper class="col-12 col-md-4">
          <bb-dropdown-single-select-ui
            label="State"
            placeholder="Select State"
            formControlName="state"
            [options]="states"
            bbInputWrapper
          >
          </bb-dropdown-single-select-ui>
        </bb-input-wrapper>
        <bb-input-wrapper class="col-12 col-md-4">
          <bb-input-text-ui
            label="Zip Code"
            formControlName="zipCode"
            placeholder="XXXXX-XXXX"
            autoComplete="postal-code"
            bbInputWrapper
          ></bb-input-text-ui>
        </bb-input-wrapper>
      </div>
    </fieldset>
    <fieldset formArrayName="authorizedUsers" *ngIf="authorizedUsers.length">
      <legend>Authorized Users</legend>
      <bb-input-authorized-users
        *ngFor="let authUser of authorizedUsers.controls"
        [formGroup]="authUser"
      ></bb-input-authorized-users>
    </fieldset>
    <button bbButton type="button" [block]="true" color="secondary" (click)="addUser()" class="mb-3">
      <bb-icon-ui name="add"> </bb-icon-ui>
      Add Authorized User
    </button>

    <div class="row">
      <bb-input-wrapper class="col-12">
        <bb-input-checkbox-ui
          label="I agree with the Terms & Conditions"
          formControlName="agreement"
          bbInputWrapper
        ></bb-input-checkbox-ui>
      </bb-input-wrapper>
    </div>
  </div>
  <div class="card-footer bb-button-bar bb-block bb-block-md">
    <bb-load-button-ui
      color="primary"
      type="submit"
      [isLoading]="loadingPromotions$ | async"
      buttonSize="md"
      (click)="onSubmit()"
      [disabled]="formGroup.invalid"
    >
      Next
    </bb-load-button-ui>
  </div>
</form>
